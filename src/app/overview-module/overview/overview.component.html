<div>
  <mat-toolbar class="app-header main layout-header-color">
    <div class="app-container" style="margin-bottom: 0">
      <div class="active-module">
        <div class="label">Overview of {{ adminService.instanceName }}</div>

        <span fxFlex></span>
        <!-- <p *ngIf="appFnvironment == 'Local'">Local</p>
				<p *ngIf="appFnvironment == 'Stage'">Stage</p> -->

        <!-- <button mat-raised-button color="warn"  (click)="createPurchaseOrder()" class="create-order-btn">Create Purchase Order</button>
				<button mat-raised-button color="warn" *ngIf="createOrderPermission" (click)="createOrder()" class="create-order-btn">Create Order</button> -->
      </div>
    </div>
  </mat-toolbar>
  <perfect-scrollbar class="content-section layout-body-color">
    <div class="app-container" *ngIf="!fetchingData">
      <div fxLayout="row" class="mr-8 ml-8 p-t-16" fxLayout.lt-sm="column">
        <mat-card
          @zoomAnimate
          class="app-card overview-card"
          [class.client-min-width]="clientPermission"
        >
          <mat-card-header class="secondary-font">Orders </mat-card-header>
          <!-- <mat-card-subtitle class="secondary-font">{{orders.newOrders == 1 ? orders.newOrders + ' ' + 'Order' : orders.newOrders + ' ' + 'Orders'}} </mat-card-subtitle> -->
          <div class="column-data space-between">
            <div class="overview-label">New Orders Today</div>
            <div class="overview-data">{{ orders.newOrders }}</div>
          </div>
          <div class="column-data space-between">
            <div class="overview-label">Total Orders</div>
            <div class="overview-data">{{ orders.total_orders_count }}</div>
          </div>
        </mat-card>
        <mat-card
          @zoomAnimate
          class="app-card overview-card"
          *ngIf="!clientPermission"
        >
          <mat-card-header>
            <div class="remaining-data secondary-font">Stock Available</div>
          </mat-card-header>
          <div
            class="column-data space-between"
            *ngFor="let stock of stock_available"
            style="gap: 4px"
          >
            <div
              class="overview-label stock"
              style="
                word-break: break-word;
                width: 100%;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
                max-width: 156px;
              "
            >
              {{ stock.name }}
            </div>
            <div class="overview-data">
              {{ stock.sum || 0 }} {{ stock.uom_name }}
            </div>
            <!-- <div class="overview-label">{{orders.prod1}} {{orders.prod1Name}}</div>
						<div class="overview-data">{{orders.veganRemaining || 0}} {{orders.prod1Name}} 
						</div> -->
          </div>
          <!-- <div class="column-data space-between"  *ngIf="orders.prod2">
						<div class="overview-label">{{orders.prod2}} </div>					
						  <div class="overview-data">{{orders.spectrumRemaining}} {{orders.prod2Name}}
							</div>
					</div> -->
        </mat-card>
        <!-- <mat-card @zoomAnimate class="app-card overview-card" *ngIf="clientPermission" [class.max-width-card]="clientPermission">
					<mat-card-header class="secondary-font">Total Due</mat-card-header>
					<div class="column-data space-between" style="margin-top: 36px;" *ngIf="orders.currency_type.currency_type != 'USA'">
						<div class="overview-label">{{orders.totalPastDue}}</div>
						<div class="overview-data">{{orders.totalDueINR || 0 | epiCurrency : 'INR'}}</div>
					</div>
					<div class="column-data space-between" style="margin-top: 36px;" *ngIf="orders.currency_type.currency_type == 'USA'">
						<div class="overview-label">{{orders.totalPastDue}}</div>
						<div class="overview-data">{{orders.totalDue || 0 | epiCurrency : 'USD'}}</div>
					</div>
				</mat-card> -->
        <mat-card @zoomAnimate class="app-card overview-card">
          <mat-card-header>Total Due</mat-card-header>
          <div *ngFor="let list of orders.due">
            <div class="column-data space-between">
              <div class="overview-label">{{ list.name }}</div>
              <div class="overview-data">
                {{ list.value || 0 | epiCurrency : "INR" }}
              </div>
            </div>
          </div>
          <!-- <div class="column-data space-between">
						<div class="overview-label">{{orders.due1Name}}</div>
						<div class="overview-data">{{orders.due1Value || 0 | epiCurrency : 'INR'}}</div>
					</div>
					<div class="column-data space-between">
						<div class="overview-label">USD</div>
						<div class="overview-data">{{orders.totalDue || 0 | epiCurrency : 'USD'}}</div>
				
					</div> -->
        </mat-card>
        <mat-card
          @zoomAnimate
          class="app-card overview-card"
          *ngIf="!clientPermission"
        >
          <mat-card-header>Total Past Due</mat-card-header>
          <div *ngFor="let list of orders.overdue">
            <div class="column-data space-between">
              <div class="overview-label">{{ list.name }}</div>
              <div class="overview-data">
                {{ list.value || 0 | epiCurrency : "INR" }}
              </div>
            </div>
          </div>
          <!-- <div class="column-data space-between">
						<div class="overview-label">{{orders.dueo1Name}}</div>
						<div class="overview-data">{{orders.dueo1Value || 0 | epiCurrency : 'INR'}}</div>
					</div>
					
					<div class="column-data space-between">
						<div class="overview-label">USD</div>
						<div class="overview-data">{{orders.totalPastDue || 0 | epiCurrency : 'USD'}}</div>
					</div> -->
        </mat-card>
      </div>
      <div fxLayout="column">
        <div class="page-header p-b-8 p-t-16">
          <aside>
            <h2 class="title-heading m-0">
              New Orders
              {{ !clientPermission ? "Pending" : "Placed" }} ({{
                newOrdersCount
              }})
            </h2>
          </aside>
          <aside *ngIf="!emptyOrdersData">
            <a
              class="primary-text-link with-mat-icon d-flex align-items-center"
              [ngClass]="{ 'hide-seall': !createOrderPermission }"
              [routerLink]="['/orders']"
            >
              <span>See all orders</span>
              <mat-icon class="order-icon">keyboard_arrow_right</mat-icon>
            </a>
          </aside>
        </div>
        <div class="table-main-container">
          <perfect-scrollbar *ngIf="!emptyOrdersData">
            <div class="list-view-table detail-table" style="padding: 0px">
              <div
                class="table-header-ui top-sticky z-index-8"
                style="top: 16px"
              >
                <div class="container-ui">
                  <mat-list-item
                    class="order-list-row mat-list-item header-cleint"
                  >
                    <div
                      class="item-container justify-start p-l-16"
                      fxFlex="16"
                    >
                      Order number
                    </div>
                    <div
                      class="item-container justify-left"
                      style="padding-left: 20px"
                      fxFlex="18"
                    >
                      Attention
                    </div>
                    <div class="item-container justify-start pl-12" fxFlex="16">
                      Country
                    </div>
                    <div class="item-container justify-start pl-12" fxFlex="16">
                      Account Manager
                    </div>
                    <div
                      class="item-container justify-right"
                      fxFlex="14"
                      style="justify-content: end"
                    >
                      Amount
                    </div>
                    <div
                      class="item-container status-align p-r-16 status-padding"
                      style="justify-content: center"
                      fxFlex="20"
                    >
                      Status
                    </div>
                  </mat-list-item>
                </div>
              </div>
              <div
                class="container-ui new-center-empty-ui"
                *ngIf="fetchingOrders"
              >
                <mat-spinner
                  class="medium-spinner"
                  *ngIf="fetchingOrders"
                ></mat-spinner>
              </div>

              <div
                *ngIf="!fetchingOrders"
                class="global_list_view container-ui"
                infiniteScroll
                [infiniteScrollDistance]="1"
                [infiniteScrollThrottle]="50"
                (scrolled)="onScroll()"
                [scrollWindow]="false"
              >
                <div fxLayout="column" fxFlex="100">
                  <div *ngIf="orders.ordersList.length">
                    <div
                      class="list-item-card"
                      (click)="orderDetails(stepper, order)"
                      *ngFor="let order of orders.ordersList"
                    >
                      <mat-list-item class="order-list-row">
                        <div class="item-container" fxFlex="16">
                          <div
                            class="d-flex align-items-center avatar-cell o-hidden"
                          >
                            <div class="icon-sec">
                              <img
                                [src]="images.estimatesIcon"
                                title="Estimates"
                              />
                            </div>
                            <div class="content-sec o-hidden ellipsis-text">
                              <h1
                                title="{{ order.order_no }}"
                                class="ellipsis-text"
                              >
                                {{ order.order_no }}
                                <mat-icon
                                  *ngIf="order.special_instructions"
                                  class="flag-orders"
                                  title="{{ order.special_instructions }}"
                                >
                                  flag</mat-icon
                                >
                              </h1>
                              <small
                                title="{{ order.product_names }}"
                                class="ellipsis-text"
                              >
                                {{ order.product_names }}</small
                              >
                            </div>
                          </div>
                        </div>

                        <div class="item-container" fxFlex="18">
                          <div
                            class="d-flex align-items-center avatar-cell o-hidden"
                          >
                            <mat-icon
                              mat-list-icon
                              class="avatar-list"
                              *ngIf="order.client_image"
                            >
                              <div
                                class="mat-order-avatar"
                                [ngStyle]="{
                                  'background-image':
                                    'url(' + order.client_image + ')'
                                }"
                              ></div>
                            </mat-icon>
                            <div
                              mat-list-icon
                              class="no-order-image"
                              *ngIf="!order.client_image"
                            >
                              <span class="mat-avatar">{{
                                order.client_name | contactImageName : 2
                              }}</span>
                            </div>
                            <div class="content-sec o-hidden ellipsis-text">
                              <h1
                                class="normal ellipsis-text"
                                title="{{ order.client_name }}"
                              >
                                {{ order.client_name }}
                              </h1>
                              <small
                                class="client-name ellipsis-text"
                                title="{{ order.name }}"
                              >
                                {{ order.name }}</small
                              >
                            </div>
                          </div>
                        </div>
                        <div class="item-container country po_no" fxFlex="16">
                          <p mat-line title="{{ order.country }}">
                            {{ order.country }}
                          </p>
                        </div>
                        <div
                          class="item-container country account_manager"
                          fxFlex="16"
                        >
                          <p mat-line title="{{ order.account_manager }}">
                            {{ order.account_manager }}
                          </p>
                        </div>
                        <div
                          class="item-container amount_container text-right country"
                          fxFlex="14"
                          style="justify-content: end"
                        >
                          <p mat-line title="{{ order.total_amount }}">
                            {{ order.currency }}
                            {{ order.total_amount }}
                          </p>
                        </div>
                        <div
                          class="item-container status-cell status-tag-container status-padding"
                          style="
                            display: flex;
                            justify-content: flex-end;
                            width: 100%;
                          "
                          fxFlex="20"
                        >
                          <div
                            class="client-status"
                            [ngClass]="{
                              accepted: order.status == 'Accepted',
                              created: order.status == 'Created',
                              'in-transit': order.status == 'In-transit',
                              delivered: order.status == 'Delivered',
                              cancelled: order.status == 'Cancelled',
                              received: order.status == 'Received',
                              processing: order.status == 'Processing',
                              placed: order.status == 'Placed',
                              draft: order.status == 'Draft',
                              passed: order.status == 'Passed',
                              shipped: order.status == 'Shipped',
                              fulfilment: order.status == 'Fulfilment',
                              pending: order.status == 'Pending',
                              expired: order.status == 'Expired'
                            }"
                          >
                            {{ order.status }}
                          </div>
                          <span style="width: 50px"></span>
                          <mat-icon class="go-to-details"
                            >keyboard_arrow_right</mat-icon
                          >
                        </div>
                      </mat-list-item>
                    </div>
                  </div>

                  <!-- <mat-card
                      class="no-results"
                      *ngIf="!orders.ordersList.length"
                      style="margin-top: 0"
                    >
                      <div class="empty-img-holder">
                        <span class="material-icons"> info </span>
                      </div>
                      <p class="no-result-text">No Data Found</p>
                    </mat-card> -->
                </div>
              </div>
            </div>
          </perfect-scrollbar>

          <mat-card class="no-results" *ngIf="!fetchingData && emptyOrdersData">
            <div class="empty-img-holder">
              <img [src]="images.ordersIcon_o" />
            </div>
            <p class="no-result-text">No New Orders Found</p>
          </mat-card>
          <!-- </div> -->
        </div>
      </div>
      <!-- <div fxLayout="column">
        <div class="page-header p-b-8 p-t-16">
          <aside>
            <h2 class="title-heading m-0">Invoices Overdue</h2>
          </aside>
          <aside *ngIf="!emptyInvoiceData">
            <a
              class="primary-text-link with-mat-icon d-flex align-items-center"
              [ngClass]="{ 'hide-seall': !invoicePermission }"
              [routerLink]="['/invoices']"
            >
              <span>See all Invoices</span>
              <mat-icon class="order-icon">keyboard_arrow_right</mat-icon>
            </a>
          </aside>
        </div>
        <div class="table-main-container">
          <div
            class="global_list_view top-align-cell-data pad_0"
            *ngIf="!emptyInvoiceData"
          >
            <mat-table @overviewAnimateLeft [dataSource]="invoiceDataSource">
              <ng-container matColumnDef="inv_nbr">
                <mat-header-cell *matHeaderCellDef fxFlex="20">
                  Invoice Number
                </mat-header-cell>
                <mat-cell *matCellDef="let element" fxFlex="20">
                  <div class="d-flex align-items-center avatar-cell o-hidden">
                    <div class="icon-sec">
                      <img
                        class="pro-img-avatar"
                        [src]="images.invoicesIcon_o"
                        title="Orders"
                      />
                    </div>
                    <div class="content-sec o-hidden ellipsis-text">
                      <h1
                        class="ellipsis-text"
                        title="{{ element.Inovice.inv_nbr }}"
                      >
                        {{ element.Inovice.inv_nbr }}
                      </h1>
                      <small
                        class="ellipsis-text"
                        title="{{ element.Inovice.po_nbr }}"
                        >{{ element.Inovice.po_nbr }}</small
                      >
                    </div>
                  </div>
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="client_name">
                <mat-header-cell *matHeaderCellDef fxFlex="30">
                  Client
                </mat-header-cell>
                <mat-cell *matCellDef="let element" fxFlex="30">
                  <div class="d-flex align-items-center avatar-cell o-hidden">
                    <div class="icon-sec" *ngIf="element.Inovice.client_image">
                      <div
                        class="pro-img-avatar"
                        [ngStyle]="{
                          'background-image':
                            'url(' + element.Inovice.client_image + ')'
                        }"
                      ></div>
                    </div>
                    <div
                      class="grid-profile-text-avatar"
                      *ngIf="!element.Inovice.client_image"
                    >
                      {{ element.Inovice.client_name | contactImageName : 2 }}
                    </div>
                    <div class="content-sec o-hidden ellipsis-text">
                      <h1
                        class="ellipsis-text"
                        title="{{ element.Inovice.client_name }}"
                      >
                        {{ element.Inovice.client_name }}
                      </h1>
                      <small
                        class="ellipsis-text"
                        title="{{ element.Inovice.kindName }}"
                        >{{ element.Inovice.kindName }}</small
                      >
                    </div>
                  </div>
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="total_amount">
                <mat-header-cell class="text-right" *matHeaderCellDef>
                  Total Amount
                </mat-header-cell>
                <mat-cell
                  *matCellDef="let element"
                  class="text-right"
                  title="{{ element.totalSum }}"
                  >{{
                    element.totalSum
                      | epiCurrency : element.Inovice.currency : true
                  }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="order_status">
                <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
                <mat-cell *matCellDef="let element">
                  <div
                    class="client-status"
                    [ngClass]="{
                      due: element.Inovice.status == 'Due',
                      overdue: element.Inovice.status == 'Overdue',
                      open: element.Inovice.status == 'Open',
                      paid: element.Inovice.status == 'Paid'
                    }"
                  >
                    {{ element.Inovice.status }}
                  </div>
                  <span fxFlex></span>
                  <mat-icon class="go-to-orders">keyboard_arrow_right</mat-icon>
                </mat-cell>
              </ng-container>
              <mat-header-row
                *matHeaderRowDef="displayedOrderList"
              ></mat-header-row>
              <mat-row
                (click)="invoiceDetail(row)"
                [ngClass]="{ cursorDefault: !invoicePermission }"
                *matRowDef="let row; columns: displayedOrderList"
              ></mat-row>
            </mat-table>
          </div>
          <mat-card
            class="no-results"
            *ngIf="!fetchingData && emptyInvoiceData"
          >
            <div class="empty-img-holder">
              <img [src]="images.invoice_green" style="height: 24px" />
            </div>
            <p class="no-result-text">No Invoices Overdue</p>
          </mat-card>
        </div>
      </div> -->
    </div>

    <div class="inv-spinner">
      <mat-spinner class="medium-spinner" *ngIf="fetchingData"></mat-spinner>
    </div>
  </perfect-scrollbar>
</div>
