<section class="hiden-stepper">
  <mat-horizontal-stepper class="inv-stepper" #stepper>
    <mat-step>
      <div
        class="center-section-scroll expansion-panel-ui vh-100 d-flex body-color"
      >
        <mat-toolbar class="page-header-ui">
          <div
            class="flex-fixed-header page-title inventory-detail-grid"
            style="margin: 0 auto"
          >
            <div (click)="goBack()" class="detail-back-action">
              <mat-icon
                class="back-to-orders mat-icon material-icons"
                role="img"
                aria-hidden="true"
                >arrow_back</mat-icon
              >
            </div>
            <span
              class="title"
              title="{{ PolicyName }}"
              [innerHtml]="PolicyName"
            ></span>

            <span fxFlex></span>
          </div>
        </mat-toolbar>

        <div
          class="w-100 expansion-panel-scroll"
          style="height: calc(100vh - 70px)"
          [class.show-footer]="reportsFooter"
        >
          <div
            class="inventory-detail-grid body-white"
            style="
              margin: 0 auto;
              margin-top: 16px;
              border: 1px solid rgb(216, 218, 221);
            "
          >
            <div
              class="header-icon-container2"
              *ngIf="!editable && currentTabIndex == 0 && !isLoading && adminService.rolePermissions.edit_insurance == 1"
            >
              <div class="edit_icon" title="Edit" (click)="editInventory()">
                <img [src]="EditIcon" alt="edit" />
              </div>
            </div>
            <mat-tab-group
              #batchTabGroup
              class="inv-detail"
              (selectedIndexChange)="onTabChange($event)"
            >
              <mat-tab label="Insurance Details">
                <div
                  class="inventory-detail-grid"
                  id="custome-gaps"
                  style="
                    height: calc(100vh - 140px);
                    overflow-y: auto;
                    margin: 0 auto;
                    border-top: none;
                  "
                  *ngFor="let detail of selectedInsuranceList"
                >
                  <div class="ex-row" *ngIf="!editable">
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy Number</h3>
                      <span class="inv-para">{{
                        detail?.policy_number ? detail?.policy_number : "-"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy Name</h3>
                      <span class="inv-para">{{ detail?.policy_name }}</span>
                    </div>

                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy Provider</h3>
                      <span class="inv-para">{{
                        detail?.policy_provider ? detail?.policy_provider : "-"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy Type</h3>
                      <span class="inv-para">{{
                        detail?.policy_type ? detail?.policy_type : "-"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Provider E-Mail</h3>
                      <span class="inv-para">{{
                        detail?.provider_email ? detail?.provider_email : "-"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Coverage Amount</h3>
                      <span class="inv-para">{{
                        detail?.coverage_amount ? detail?.coverage_amount : "-"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Premium Amount</h3>
                      <span class="inv-para">{{ detail?.premium_amount ? detail?.premium_amount : '-' }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">
                        Minimum Required Balance
                      </h3>
                      <span class="inv-para">{{
                        detail?.minimum_required_balance
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Single Carrying Limit</h3>
                      <span class="inv-para">{{
                        detail?.single_carrying_limit
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">
                        Aggregate Annual Turnover
                      </h3>
                      <span class="inv-para">{{
                        detail?.aggregate_annual_turnover
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Balance Amount</h3>
                      <span class="inv-para">{{
                        balanceAmount ? balanceAmount : "--"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Currency</h3>
                      <span class="inv-para">{{
                        detail?.currency ? detail?.currency : "--"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy Start Date</h3>
                      <span class="inv-para">{{
                        detail?.policy_start_date | date : "dd/MMM/yyyy"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Policy End Date</h3>
                      <span class="inv-para">{{
                        detail?.policy_end_date | date : "dd/MMM/yyyy"
                      }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Status</h3>
                      <span class="inv-para">{{ detail?.status?.label }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">Renewal Terms</h3>
                      <span class="inv-para">{{ detail?.renewal_terms }}</span>
                    </div>
                    <div class="grid-six">
                      <h3 class="inv-readonly fw-600">
                        Additional Information
                      </h3>
                      <span class="inv-para">{{
                        detail?.additional_information
                      }}</span>
                    </div>
                  </div>

                  <!-- <div class="batch-edit" *ngIf="!editable">
                    <a
                      title="Edit"
                      class="primary-text-link"
                      style="cursor: pointer"
                      (click)="editInventory()"
                      >Edit</a
                    >
                  </div> -->
                  <div class="edit-tab" *ngIf="editable">
                    <form class="ex-row form-ui">
                      <app-form-builder
                        [module]="'add_insurance'"
                        (trigger)="formEmitEvent($event)"
                        [batchId]="data.estimate_id"
                      ></app-form-builder>
                      <div style="clear: both"></div>
                      <div
                        fxLayout="row"
                        class="w-100"
                        style="padding: 0 16px"
                        fxLayoutAlign="end center"
                        *ngIf="showSavePanel"
                      >
                        <button
                          class="back-btn-ui"
                          (click)="resetInsurance(editForm)"
                        >
                          {{ language.defaults.cancel }}
                        </button>
                        <button
                          mat-raised-button
                          (click)="update()"
                          [disabled]="editForm.invalid || disableBtn"
                        >
                          {{ language.defaults.save }}
                        </button>
                      </div>
                    </form>
                  </div>
                  <div style="position: fixed; top: 50%; left: 50%">
                    <mat-spinner
                      class="medium-spinner page-fixed"
                      *ngIf="isLoading"
                    ></mat-spinner>
                  </div>
                </div>

                <div
                  class="container-ui new-center-empty-ui"
                  *ngIf="selectedInsuranceList.length == 0"
                >
                  <mat-card class="no-results">
                    <div class="empty-img-holder">
                      <img [src]="images.batchIcon_o" />
                    </div>
                    <p class="no-result-text">No Data Found</p>
                  </mat-card>
                </div>
              </mat-tab>

              <mat-tab label="Coverage Credits & Debits" class="client-orders">
                <div class="client-reports inventory">
                  <table class="client-detail-table">
                    <thead>
                      <tr>
                        <th class="wid-10 align-center fw-600">Sl No</th>
                        <th class="wid-10 align-center fw-600">Date Added</th>
                        <th class="wid-25 align-center fw-600">Shipping No</th>
                        <th class="wid-25 align-center fw-600">Invoice No</th>
                        <th class="wid-25 align-right fw-600">
                          Insured Amount ({{ currency }})
                        </th>
                        <th class="wid-25 align-right fw-600">
                          Topup Amount ({{ currency }})
                        </th>
                        <th class="wid-25 align-right fw-600">
                          Balance Insurance ({{ currency }})
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let detail of selectedClientDetail">
                        <td class="align-center">{{ detail.sr_no }}</td>
                        <td class="align-center border-right">
                          {{ detail.date_added }}
                        </td>
                        <td class="align-center border-right">
                          {{ detail.shipment_no ? detail.shipment_no : "--" }}
                        </td>
                        <td class="align-center border-right">
                          {{ detail.invoice_no ? detail.invoice_no : "--" }}
                        </td>
                        <td class="align-right border-right">
                          {{
                            detail.insured_amount ? detail.insured_amount : "--"
                          }}
                        </td>
                        <td class="align-right border-right">
                          {{ detail.topup_amount ? detail.topup_amount : "--" }}
                        </td>
                        <td class="align-right">
                          {{
                            detail.balance_amount ? detail.balance_amount : "--"
                          }}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <p
                    *ngIf="!selectedClientDetail.length"
                    style="
                      text-align: center;
                      color: #737373;
                      font-size: 18px;
                      padding: 18px;
                    "
                  >
                    No Data Found
                  </p>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</section>
