<div class="order-main-container">
  <mat-toolbar>
    <div class="create-pfi-title-wrapper">
      <span class="img-icon">
        <img [src]="shipmentsIcon" alt="Icon" />
      </span>
      <h2 class="order-main-title">{{ data.title }}</h2>
    </div>
  </mat-toolbar>
  <mat-dialog-content>
    <form>
      <!-- <app-form-builder
        [module]="data.tableName"
        (trigger)="formEmitEvent($event)"
        [Contacts]="data.prefillId ? data.prefillId : ''"
        [editTypeForRestrict]="true"
        [dropDownRelatedId]="data.related_to_id ? data.related_to_id : ''"
      ></app-form-builder> -->
      <!-- [clientSelectedId]="clientSelectedId" -->
      <div class="product-error">
        <app-products-form
          [module]="'add_product_in_shipment'"
          [shipmetOrderProducts]="data.shipmetOrderProducts"
          (trigger)="formEmitEvent($event)"
          [Contacts]="data.orders[0].id ? data.orders[0].id : ''"
          [selected_order_ids]="data.ordersId"
          [isSubmitBtnClicked]="submiteBtnClicked"
          type="add_product_in_order"
        >
        </app-products-form>
      </div>
      <div class="subtotal-error">
        <app-sub-total-form
          [module]="'subtotal_form'"
          [related_to_id]="data.orders[0].id ? data.orders[0].id : ''"
          [subTotalSum]="subTotalVal"
          (trigger)="subTotalFormEvent($event)"
          [selectedCurrency]="data?.selectedCurrency"
          [Contacts]="data.orders[0].id ? data.orders[0].id : ''"
        ></app-sub-total-form>
        <!-- [selectedCurrency]="selectedCurrency" -->
        <!-- [isSubmitBtnClicked]="submiteBtnClicked" -->
      </div>
    </form>
    <mat-spinner
      class="medium-spinner page-fixed"
      *ngIf="fetchingData"
    ></mat-spinner>
  </mat-dialog-content>
  <mat-dialog-actions>
    <span fxFlex></span>
    <div class="conformPFi">
      <button class="back-btn-ui" mat-dialog-close *ngIf="!submiteBtnClicked">
        Cancel
      </button>
      <button
        *ngIf="pfiSubTotalPayload?.dirty || productsForm?.dirty"
        mat-raised-button
        [disabled]="
          !this.pfiSubTotalPayload?.valid ||
          getSelectedProdsLenght() == 0 ||
          disabledSave ||
          submiteBtnClicked
        "
        (click)="editProducts()"
      >
        <!-- formsError || -->
        Save
        <span *ngIf="submiteBtnClicked">
          <mat-icon style="height: 16px; width: 16px"
            ><mat-spinner
              class="white-spinner"
              diameter="20"
            ></mat-spinner></mat-icon
        ></span>
      </button>
    </div>
    <!-- <div class="conformPFi" *ngIf="submiteBtnClicked">
      <button mat-raised-button disabled="true">
        <mat-icon>
          <mat-spinner class="white-spinner" diameter="20"></mat-spinner
        ></mat-icon>
      </button>
    </div> -->
  </mat-dialog-actions>
</div>
